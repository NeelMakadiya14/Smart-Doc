{"ast":null,"code":"import _readOnlyError from\"/media/neel/DATA/WebD/Smart Doc/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";import React,{useState,useEffect}from'react';import AudioChannel from'./AudioChannel';import{unmountComponentAtNode}from\"react-dom\";import{v1 as uuid}from\"uuid\";import Container from'@material-ui/core/Container';import{CookiesProvider,Cookies,useCookies}from'react-cookie';import Typography from'@material-ui/core/Typography';import Paper from'@material-ui/core/Paper';import Divider from'@material-ui/core/Divider';import Grid from'@material-ui/core/Grid';import Card from'@material-ui/core/Card';import*as Y from'yjs';import{WebsocketProvider}from'y-websocket';import{QuillBinding}from'y-quill';import Quill from'quill';import QuillCursors from'quill-cursors';import Chat from'./Chat';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Room(props){var roomID=props.match.params.roomID;Quill.register('modules/cursors',QuillCursors);var ydoc=new Y.Doc();var cookies=new Cookies();var userCookie=cookies.get('userCookie');var username=userCookie.name;var obj={userName:userCookie.name,photoUri:\"123\",GID:userCookie.GID,doc_name:\"xyz\",doc_id:roomID};var url=process.env.NODE_ENV===\"production\"?\"https://thawing-dawn-49846.herokuapp.com/\":\"http://localhost:5000/\";useEffect(function(){console.log(obj);axios.post(\"\".concat(url,\"user_doc\"),obj).then(function(res){console.log(res);});},[]);var provider=new WebsocketProvider('wss://shielded-sierra-61478.herokuapp.com',\"\".concat(roomID),ydoc);var type=ydoc.getText(\"\".concat(roomID));useEffect(function(){var EditorContainer=document.getElementById(\"editor\");var toolbarOptions=[['bold','italic','underline','strike'],// toggled buttons\n['blockquote','code-block'],[{'header':1},{'header':2}],// custom button values\n[{'list':'ordered'},{'list':'bullet'}],[{'script':'sub'},{'script':'super'}],// superscript/subscript\n[{'indent':'-1'},{'indent':'+1'}],// outdent/indent\n[{'direction':'rtl'}],// text direction\n[{'size':['small',false,'large','huge']}],// custom dropdown\n[{'header':[1,2,3,4,5,6,false]}],[{'color':[]},{'background':[]}],// dropdown with defaults from theme\n[{'font':[]}],[{'align':[]}],['clean']];var editor=new Quill(EditorContainer,{modules:{cursors:true,toolbar:toolbarOptions,history:{userOnly:true}},placeholder:'Start collaborating...',theme:'snow'// or 'bubble'\n});var binding=new QuillBinding(type,editor,provider.awareness);//console.log(provider.awareness);\nif(!username)username=(_readOnlyError(\"username\"),'Anonymous');provider.awareness.setLocalStateField('user',{name:\"\".concat(username),color:'blue'});// @ts-ignore\nwindow.example={provider:provider,ydoc:ydoc,type:type,binding:binding,Y:Y};});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",justify:\"center\",alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,style:{maxHeight:100+'vh'},children:/*#__PURE__*/_jsx(AudioChannel,{room:roomID,style:{height:'inherit'}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:7,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"div\",{id:\"editor\"})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,style:{height:100+'%'},alignItems:\"end\",children:/*#__PURE__*/_jsx(Chat,{roomID:roomID})})]})});}","map":{"version":3,"sources":["/media/neel/DATA/WebD/Smart Doc/client/src/routes/Room.js"],"names":["React","useState","useEffect","AudioChannel","unmountComponentAtNode","v1","uuid","Container","CookiesProvider","Cookies","useCookies","Typography","Paper","Divider","Grid","Card","Y","WebsocketProvider","QuillBinding","Quill","QuillCursors","Chat","axios","Room","props","roomID","match","params","register","ydoc","Doc","cookies","userCookie","get","username","name","obj","userName","photoUri","GID","doc_name","doc_id","url","process","env","NODE_ENV","console","log","post","then","res","provider","type","getText","EditorContainer","document","getElementById","toolbarOptions","editor","modules","cursors","toolbar","history","userOnly","placeholder","theme","binding","awareness","setLocalStateField","color","window","example","maxHeight","height"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport AudioChannel from './AudioChannel';\r\nimport { unmountComponentAtNode } from \"react-dom\";\r\nimport { v1 as uuid } from \"uuid\";\r\nimport Container from '@material-ui/core/Container';\r\nimport { CookiesProvider, Cookies,useCookies } from 'react-cookie';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport * as Y from 'yjs'\r\nimport { WebsocketProvider } from 'y-websocket'\r\nimport { QuillBinding } from 'y-quill'\r\nimport Quill from 'quill'\r\nimport QuillCursors from 'quill-cursors'\r\nimport Chat from './Chat'\r\nimport axios from \"axios\";\r\n\r\nexport default function Room(props) {\r\n    const roomID = props.match.params.roomID;\r\n\r\n    Quill.register('modules/cursors', QuillCursors)\r\n\r\n    const ydoc = new Y.Doc()\r\n\r\n    const cookies = new Cookies();\r\n    const userCookie=cookies.get('userCookie');\r\n\r\n    const username=userCookie.name;\r\n\r\n    const obj={\r\n            userName:userCookie.name,\r\n            photoUri:\"123\",\r\n            GID:userCookie.GID,\r\n            doc_name:\"xyz\",\r\n            doc_id:roomID,\r\n    }\r\n\r\n    const url = (process.env.NODE_ENV===\"production\" ? \"https://thawing-dawn-49846.herokuapp.com/\" : \"http://localhost:5000/\");\r\n    \r\n    useEffect(()=>{\r\n        console.log(obj);\r\n        axios.post(`${url}user_doc`,obj).then((res)=>{\r\n            console.log(res);\r\n        })\r\n    },[]);\r\n\r\n   \r\n\r\n    const provider = new WebsocketProvider('wss://shielded-sierra-61478.herokuapp.com',`${roomID}`, ydoc)\r\n    const type = ydoc.getText(`${roomID}`);\r\n\r\n    useEffect(()=>{\r\n        const EditorContainer = document.getElementById(\"editor\");\r\n\r\n        var toolbarOptions = [\r\n            ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\r\n            ['blockquote', 'code-block'],\r\n        \r\n            [{ 'header': 1 }, { 'header': 2 }],               // custom button values\r\n            [{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n            [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\r\n            [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\r\n            [{ 'direction': 'rtl' }],                         // text direction\r\n        \r\n            [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\r\n            [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n        \r\n            [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\r\n            [{ 'font': [] }],\r\n            [{ 'align': [] }],\r\n            ['clean']  \r\n        ];\r\n\r\n        var editor = new Quill(EditorContainer, {\r\n            modules: {\r\n            cursors : true,\r\n            toolbar:toolbarOptions,\r\n            history: {\r\n                userOnly: true\r\n            }\r\n            },\r\n            placeholder: 'Start collaborating...',\r\n            theme: 'snow' // or 'bubble'\r\n        })   \r\n\r\n        const binding = new QuillBinding(type, editor, provider.awareness)\r\n        //console.log(provider.awareness);\r\n        if(!username)username='Anonymous';\r\n        provider.awareness.setLocalStateField('user', {\r\n            name: `${username}`,\r\n            color: 'blue'\r\n        });\r\n\r\n        // @ts-ignore\r\n        window.example = { provider, ydoc, type, binding, Y }\r\n    });\r\n    \r\n  \r\n   \r\n    return (\r\n            <div>\r\n                <Grid\r\n                container\r\n                direction=\"row\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n                spacing={1}\r\n                >\r\n                    <Grid item xs={2} style={{maxHeight:100+'vh'}}>\r\n                        <AudioChannel room={roomID} style={{height:'inherit'}}/>\r\n                    </Grid>\r\n                    <Grid item xs={7}>\r\n                        <Card>\r\n                            <div id=\"editor\"></div>\r\n                        </Card>\r\n                    </Grid>\r\n                    <Grid \r\n                        item \r\n                        xs={3} \r\n                        style={{height:100+'%'}}\r\n                        alignItems=\"end\"\r\n                    >\r\n                        <Chat roomID={roomID}/>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}