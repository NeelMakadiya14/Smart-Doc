{"ast":null,"code":"import _classCallCheck from \"/media/neel/DATA/WebD/Smart Doc/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/neel/DATA/WebD/Smart Doc/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _toConsumableArray from \"/media/neel/DATA/WebD/Smart Doc/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/media/neel/DATA/WebD/Smart Doc/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _browserStyleMap2, _nodeStyleMap2;\n\n/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\nimport * as env from './environment.js';\nimport * as symbol from './symbol.js';\nimport * as pair from './pair.js';\nimport * as dom from './dom.js';\nimport * as json from './json.js';\nimport * as map from './map.js';\nimport * as eventloop from './eventloop.js';\nimport * as math from './math.js';\nimport * as time from './time.js';\nimport * as func from './function.js';\nexport var BOLD = symbol.create();\nexport var UNBOLD = symbol.create();\nexport var BLUE = symbol.create();\nexport var GREY = symbol.create();\nexport var GREEN = symbol.create();\nexport var RED = symbol.create();\nexport var PURPLE = symbol.create();\nexport var ORANGE = symbol.create();\nexport var UNCOLOR = symbol.create();\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\n\nvar _browserStyleMap = (_browserStyleMap2 = {}, _defineProperty(_browserStyleMap2, BOLD, pair.create('font-weight', 'bold')), _defineProperty(_browserStyleMap2, UNBOLD, pair.create('font-weight', 'normal')), _defineProperty(_browserStyleMap2, BLUE, pair.create('color', 'blue')), _defineProperty(_browserStyleMap2, GREEN, pair.create('color', 'green')), _defineProperty(_browserStyleMap2, GREY, pair.create('color', 'grey')), _defineProperty(_browserStyleMap2, RED, pair.create('color', 'red')), _defineProperty(_browserStyleMap2, PURPLE, pair.create('color', 'purple')), _defineProperty(_browserStyleMap2, ORANGE, pair.create('color', 'orange')), _defineProperty(_browserStyleMap2, UNCOLOR, pair.create('color', 'black')), _browserStyleMap2);\n\nvar _nodeStyleMap = (_nodeStyleMap2 = {}, _defineProperty(_nodeStyleMap2, BOLD, \"\\x1B[1m\"), _defineProperty(_nodeStyleMap2, UNBOLD, \"\\x1B[2m\"), _defineProperty(_nodeStyleMap2, BLUE, '\\x1b[34m'), _defineProperty(_nodeStyleMap2, GREEN, '\\x1b[32m'), _defineProperty(_nodeStyleMap2, GREY, \"\\x1B[37m\"), _defineProperty(_nodeStyleMap2, RED, '\\x1b[31m'), _defineProperty(_nodeStyleMap2, PURPLE, '\\x1b[35m'), _defineProperty(_nodeStyleMap2, ORANGE, '\\x1b[38;5;208m'), _defineProperty(_nodeStyleMap2, UNCOLOR, '\\x1b[0m'), _nodeStyleMap2);\n/* istanbul ignore next */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\n\n\nvar computeBrowserLoggingArgs = function computeBrowserLoggingArgs(args) {\n  var strBuilder = [];\n  var styles = [];\n  var currentStyle = map.create();\n  /**\n   * @type {Array<string|Object|number>}\n   */\n\n  var logArgs = []; // try with formatting until we find something unsupported\n\n  var i = 0;\n\n  for (; i < args.length; i++) {\n    var arg = args[i]; // @ts-ignore\n\n    var style = _browserStyleMap[arg];\n\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        var _style = dom.mapToStyleString(currentStyle);\n\n        if (i > 0 || _style.length > 0) {\n          strBuilder.push('%c' + arg);\n          styles.push(_style);\n        } else {\n          strBuilder.push(arg);\n        }\n      } else {\n        break;\n      }\n    }\n  }\n\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles;\n    logArgs.unshift(strBuilder.join(''));\n  } // append the rest\n\n\n  for (; i < args.length; i++) {\n    var _arg = args[i];\n\n    if (!(_arg instanceof Symbol)) {\n      logArgs.push(_arg);\n    }\n  }\n\n  return logArgs;\n};\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\n\n\nvar computeNodeLoggingArgs = function computeNodeLoggingArgs(args) {\n  var strBuilder = [];\n  var logArgs = []; // try with formatting until we find something unsupported\n\n  var i = 0;\n\n  for (; i < args.length; i++) {\n    var arg = args[i]; // @ts-ignore\n\n    var style = _nodeStyleMap[arg];\n\n    if (style !== undefined) {\n      strBuilder.push(style);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg);\n      } else {\n        break;\n      }\n    }\n  }\n\n  if (i > 0) {\n    // create logArgs with what we have so far\n    strBuilder.push('\\x1b[0m');\n    logArgs.push(strBuilder.join(''));\n  } // append the rest\n\n\n  for (; i < args.length; i++) {\n    var _arg2 = args[i];\n    /* istanbul ignore else */\n\n    if (!(_arg2 instanceof Symbol)) {\n      logArgs.push(_arg2);\n    }\n  }\n\n  return logArgs;\n};\n/* istanbul ignore next */\n\n\nvar computeLoggingArgs = env.isNode ? computeNodeLoggingArgs : computeBrowserLoggingArgs;\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\n\nexport var print = function print() {\n  var _console;\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  (_console = console).log.apply(_console, _toConsumableArray(computeLoggingArgs(args)));\n  /* istanbul ignore next */\n\n\n  vconsoles.forEach(function (vc) {\n    return vc.print(args);\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\n\nexport var warn = function warn() {\n  var _console2;\n\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  (_console2 = console).warn.apply(_console2, _toConsumableArray(computeLoggingArgs(args)));\n\n  args.unshift(ORANGE);\n  vconsoles.forEach(function (vc) {\n    return vc.print(args);\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {Error} err\n */\n\nexport var printError = function printError(err) {\n  console.error(err);\n  vconsoles.forEach(function (vc) {\n    return vc.printError(err);\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\n\nexport var printImg = function printImg(url, height) {\n  if (env.isBrowser) {\n    console.log('%c                      ', \"font-size: \".concat(height, \"px; background-size: contain; background-repeat: no-repeat; background-image: url(\").concat(url, \")\")); // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n\n  vconsoles.forEach(function (vc) {\n    return vc.printImg(url, height);\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {string} base64\n * @param {number} height\n */\n\nexport var printImgBase64 = function printImgBase64(base64, height) {\n  return printImg(\"data:image/gif;base64,\".concat(base64), height);\n};\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\n\nexport var group = function group() {\n  var _console3;\n\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n\n  (_console3 = console).group.apply(_console3, _toConsumableArray(computeLoggingArgs(args)));\n  /* istanbul ignore next */\n\n\n  vconsoles.forEach(function (vc) {\n    return vc.group(args);\n  });\n};\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\n\nexport var groupCollapsed = function groupCollapsed() {\n  var _console4;\n\n  for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  (_console4 = console).groupCollapsed.apply(_console4, _toConsumableArray(computeLoggingArgs(args)));\n  /* istanbul ignore next */\n\n\n  vconsoles.forEach(function (vc) {\n    return vc.groupCollapsed(args);\n  });\n};\nexport var groupEnd = function groupEnd() {\n  console.groupEnd();\n  /* istanbul ignore next */\n\n  vconsoles.forEach(function (vc) {\n    return vc.groupEnd();\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {function():Node} createNode\n */\n\nexport var printDom = function printDom(createNode) {\n  return vconsoles.forEach(function (vc) {\n    return vc.printDom(createNode());\n  });\n};\n/* istanbul ignore next */\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\n\nexport var printCanvas = function printCanvas(canvas, height) {\n  return printImg(canvas.toDataURL(), height);\n};\nexport var vconsoles = new Set();\n/* istanbul ignore next */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\n\nvar _computeLineSpans = function _computeLineSpans(args) {\n  var spans = [];\n  var currentStyle = new Map(); // try with formatting until we find something unsupported\n\n  var i = 0;\n\n  for (; i < args.length; i++) {\n    var arg = args[i]; // @ts-ignore\n\n    var style = _browserStyleMap[arg];\n\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right);\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        var span = dom.element('span', [pair.create('style', dom.mapToStyleString(currentStyle))], [dom.text(arg)]);\n\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;';\n        }\n\n        spans.push(span);\n      } else {\n        break;\n      }\n    }\n  } // append the rest\n\n\n  for (; i < args.length; i++) {\n    var content = args[i];\n\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' ';\n      }\n\n      spans.push(dom.element('span', [], [dom.text(\n      /** @type {string} */\n      content)]));\n    }\n  }\n\n  return spans;\n};\n\nvar lineStyle = 'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;';\n/* istanbul ignore next */\n\nexport var VConsole = /*#__PURE__*/function () {\n  /**\n   * @param {Element} dom\n   */\n  function VConsole(dom) {\n    _classCallCheck(this, VConsole);\n\n    this.dom = dom;\n    /**\n     * @type {Element}\n     */\n\n    this.ccontainer = this.dom;\n    this.depth = 0;\n    vconsoles.add(this);\n  }\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n\n\n  _createClass(VConsole, [{\n    key: \"group\",\n    value: function group(args) {\n      var _this = this;\n\n      var collapsed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      eventloop.enqueue(function () {\n        var triangleDown = dom.element('span', [pair.create('hidden', collapsed), pair.create('style', 'color:grey;font-size:120%;')], [dom.text('▼')]);\n        var triangleRight = dom.element('span', [pair.create('hidden', !collapsed), pair.create('style', 'color:grey;font-size:125%;')], [dom.text('▶')]);\n        var content = dom.element('div', [pair.create('style', \"\".concat(lineStyle, \";padding-left:\").concat(_this.depth * 10, \"px\"))], [triangleDown, triangleRight, dom.text(' ')].concat(_computeLineSpans(args)));\n        var nextContainer = dom.element('div', [pair.create('hidden', collapsed)]);\n        var nextLine = dom.element('div', [], [content, nextContainer]);\n        dom.append(_this.ccontainer, [nextLine]);\n        _this.ccontainer = nextContainer;\n        _this.depth++; // when header is clicked, collapse/uncollapse container\n\n        dom.addEventListener(content, 'click', function (event) {\n          nextContainer.toggleAttribute('hidden');\n          triangleDown.toggleAttribute('hidden');\n          triangleRight.toggleAttribute('hidden');\n        });\n      });\n    }\n    /**\n     * @param {Array<string|Symbol|Object|number>} args\n     */\n\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed(args) {\n      this.group(args, true);\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd() {\n      var _this2 = this;\n\n      eventloop.enqueue(function () {\n        if (_this2.depth > 0) {\n          _this2.depth--; // @ts-ignore\n\n          _this2.ccontainer = _this2.ccontainer.parentElement.parentElement;\n        }\n      });\n    }\n    /**\n     * @param {Array<string|Symbol|Object|number>} args\n     */\n\n  }, {\n    key: \"print\",\n    value: function print(args) {\n      var _this3 = this;\n\n      eventloop.enqueue(function () {\n        dom.append(_this3.ccontainer, [dom.element('div', [pair.create('style', \"\".concat(lineStyle, \";padding-left:\").concat(_this3.depth * 10, \"px\"))], _computeLineSpans(args))]);\n      });\n    }\n    /**\n     * @param {Error} err\n     */\n\n  }, {\n    key: \"printError\",\n    value: function printError(err) {\n      this.print([RED, BOLD, err.toString()]);\n    }\n    /**\n     * @param {string} url\n     * @param {number} height\n     */\n\n  }, {\n    key: \"printImg\",\n    value: function printImg(url, height) {\n      var _this4 = this;\n\n      eventloop.enqueue(function () {\n        dom.append(_this4.ccontainer, [dom.element('img', [pair.create('src', url), pair.create('height', \"\".concat(math.round(height * 1.5), \"px\"))])]);\n      });\n    }\n    /**\n     * @param {Node} node\n     */\n\n  }, {\n    key: \"printDom\",\n    value: function printDom(node) {\n      var _this5 = this;\n\n      eventloop.enqueue(function () {\n        dom.append(_this5.ccontainer, [node]);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this6 = this;\n\n      eventloop.enqueue(function () {\n        vconsoles.delete(_this6);\n      });\n    }\n  }]);\n\n  return VConsole;\n}();\n/* istanbul ignore next */\n\n/**\n * @param {Element} dom\n */\n\nexport var createVConsole = function createVConsole(dom) {\n  return new VConsole(dom);\n};\nvar loggingColors = [GREEN, PURPLE, ORANGE, BLUE];\nvar nextColor = 0;\nvar lastLoggingTime = time.getUnixTime();\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\n\nexport var createModuleLogger = function createModuleLogger(moduleName) {\n  var color = loggingColors[nextColor];\n  var debugRegexVar = env.getVariable('log');\n  var doLogging = debugRegexVar !== null && (debugRegexVar === '*' || debugRegexVar === 'true' || new RegExp(debugRegexVar, 'gi').test(moduleName));\n  nextColor = (nextColor + 1) % loggingColors.length;\n  moduleName += ': ';\n  return !doLogging ? func.nop : function () {\n    var timeNow = time.getUnixTime();\n    var timeDiff = timeNow - lastLoggingTime;\n    lastLoggingTime = timeNow;\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    print.apply(void 0, [color, moduleName, UNCOLOR].concat(_toConsumableArray(args.map(function (arg) {\n      return typeof arg === 'string' || typeof arg === 'symbol' ? arg : JSON.stringify(arg);\n    })), [color, ' +' + timeDiff + 'ms']));\n  };\n};","map":{"version":3,"sources":["/media/neel/DATA/WebD/Smart Doc/client/node_modules/lib0/logging.js"],"names":["env","symbol","pair","dom","json","map","eventloop","math","time","func","BOLD","create","UNBOLD","BLUE","GREY","GREEN","RED","PURPLE","ORANGE","UNCOLOR","_browserStyleMap","_nodeStyleMap","computeBrowserLoggingArgs","args","strBuilder","styles","currentStyle","logArgs","i","length","arg","style","undefined","set","left","right","constructor","String","Number","mapToStyleString","push","unshift","join","Symbol","computeNodeLoggingArgs","computeLoggingArgs","isNode","print","console","log","vconsoles","forEach","vc","warn","printError","err","error","printImg","url","height","isBrowser","printImgBase64","base64","group","groupCollapsed","groupEnd","printDom","createNode","printCanvas","canvas","toDataURL","Set","_computeLineSpans","spans","Map","span","element","text","innerHTML","content","stringify","lineStyle","VConsole","ccontainer","depth","add","collapsed","enqueue","triangleDown","triangleRight","concat","nextContainer","nextLine","append","addEventListener","event","toggleAttribute","parentElement","toString","round","node","delete","createVConsole","loggingColors","nextColor","lastLoggingTime","getUnixTime","createModuleLogger","moduleName","color","debugRegexVar","getVariable","doLogging","RegExp","test","nop","timeNow","timeDiff","JSON"],"mappings":"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","sourcesContent":["/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\n\nimport * as env from './environment.js'\nimport * as symbol from './symbol.js'\nimport * as pair from './pair.js'\nimport * as dom from './dom.js'\nimport * as json from './json.js'\nimport * as map from './map.js'\nimport * as eventloop from './eventloop.js'\nimport * as math from './math.js'\nimport * as time from './time.js'\nimport * as func from './function.js'\n\nexport const BOLD = symbol.create()\nexport const UNBOLD = symbol.create()\nexport const BLUE = symbol.create()\nexport const GREY = symbol.create()\nexport const GREEN = symbol.create()\nexport const RED = symbol.create()\nexport const PURPLE = symbol.create()\nexport const ORANGE = symbol.create()\nexport const UNCOLOR = symbol.create()\n\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\nconst _browserStyleMap = {\n  [BOLD]: pair.create('font-weight', 'bold'),\n  [UNBOLD]: pair.create('font-weight', 'normal'),\n  [BLUE]: pair.create('color', 'blue'),\n  [GREEN]: pair.create('color', 'green'),\n  [GREY]: pair.create('color', 'grey'),\n  [RED]: pair.create('color', 'red'),\n  [PURPLE]: pair.create('color', 'purple'),\n  [ORANGE]: pair.create('color', 'orange'), // not well supported in chrome when debugging node with inspector - TODO: deprecate\n  [UNCOLOR]: pair.create('color', 'black')\n}\n\nconst _nodeStyleMap = {\n  [BOLD]: '\\u001b[1m',\n  [UNBOLD]: '\\u001b[2m',\n  [BLUE]: '\\x1b[34m',\n  [GREEN]: '\\x1b[32m',\n  [GREY]: '\\u001b[37m',\n  [RED]: '\\x1b[31m',\n  [PURPLE]: '\\x1b[35m',\n  [ORANGE]: '\\x1b[38;5;208m',\n  [UNCOLOR]: '\\x1b[0m'\n}\n\n/* istanbul ignore next */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeBrowserLoggingArgs = args => {\n  const strBuilder = []\n  const styles = []\n  const currentStyle = map.create()\n  /**\n   * @type {Array<string|Object|number>}\n   */\n  let logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        const style = dom.mapToStyleString(currentStyle)\n        if (i > 0 || style.length > 0) {\n          strBuilder.push('%c' + arg)\n          styles.push(style)\n        } else {\n          strBuilder.push(arg)\n        }\n      } else {\n        break\n      }\n    }\n  }\n\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles\n    logArgs.unshift(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<string|object|number>}\n */\nconst computeNodeLoggingArgs = args => {\n  const strBuilder = []\n  const logArgs = []\n\n  // try with formatting until we find something unsupported\n  let i = 0\n\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _nodeStyleMap[arg]\n    if (style !== undefined) {\n      strBuilder.push(style)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        strBuilder.push(arg)\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    strBuilder.push('\\x1b[0m')\n    logArgs.push(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    /* istanbul ignore else */\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n\n/* istanbul ignore next */\nconst computeLoggingArgs = env.isNode ? computeNodeLoggingArgs : computeBrowserLoggingArgs\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const print = (...args) => {\n  console.log(...computeLoggingArgs(args))\n  /* istanbul ignore next */\n  vconsoles.forEach(vc => vc.print(args))\n}\n\n/* istanbul ignore next */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const warn = (...args) => {\n  console.warn(...computeLoggingArgs(args))\n  args.unshift(ORANGE)\n  vconsoles.forEach(vc => vc.print(args))\n}\n\n/* istanbul ignore next */\n/**\n * @param {Error} err\n */\nexport const printError = err => {\n  console.error(err)\n  vconsoles.forEach(vc => vc.printError(err))\n}\n\n/* istanbul ignore next */\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\nexport const printImg = (url, height) => {\n  if (env.isBrowser) {\n    console.log('%c                      ', `font-size: ${height}px; background-size: contain; background-repeat: no-repeat; background-image: url(${url})`)\n    // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n  vconsoles.forEach(vc => vc.printImg(url, height))\n}\n\n/* istanbul ignore next */\n/**\n * @param {string} base64\n * @param {number} height\n */\nexport const printImgBase64 = (base64, height) => printImg(`data:image/gif;base64,${base64}`, height)\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const group = (...args) => {\n  console.group(...computeLoggingArgs(args))\n  /* istanbul ignore next */\n  vconsoles.forEach(vc => vc.group(args))\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const groupCollapsed = (...args) => {\n  console.groupCollapsed(...computeLoggingArgs(args))\n  /* istanbul ignore next */\n  vconsoles.forEach(vc => vc.groupCollapsed(args))\n}\n\nexport const groupEnd = () => {\n  console.groupEnd()\n  /* istanbul ignore next */\n  vconsoles.forEach(vc => vc.groupEnd())\n}\n\n/* istanbul ignore next */\n/**\n * @param {function():Node} createNode\n */\nexport const printDom = createNode =>\n  vconsoles.forEach(vc => vc.printDom(createNode()))\n\n/* istanbul ignore next */\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\nexport const printCanvas = (canvas, height) => printImg(canvas.toDataURL(), height)\n\nexport const vconsoles = new Set()\n\n/* istanbul ignore next */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\nconst _computeLineSpans = args => {\n  const spans = []\n  const currentStyle = new Map()\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        const span = dom.element('span', [pair.create('style', dom.mapToStyleString(currentStyle))], [dom.text(arg)])\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;'\n        }\n        spans.push(span)\n      } else {\n        break\n      }\n    }\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    let content = args[i]\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' '\n      }\n      spans.push(dom.element('span', [], [dom.text(/** @type {string} */ (content))]))\n    }\n  }\n  return spans\n}\n\nconst lineStyle = 'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;'\n\n/* istanbul ignore next */\nexport class VConsole {\n  /**\n   * @param {Element} dom\n   */\n  constructor (dom) {\n    this.dom = dom\n    /**\n     * @type {Element}\n     */\n    this.ccontainer = this.dom\n    this.depth = 0\n    vconsoles.add(this)\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n  group (args, collapsed = false) {\n    eventloop.enqueue(() => {\n      const triangleDown = dom.element('span', [pair.create('hidden', collapsed), pair.create('style', 'color:grey;font-size:120%;')], [dom.text('▼')])\n      const triangleRight = dom.element('span', [pair.create('hidden', !collapsed), pair.create('style', 'color:grey;font-size:125%;')], [dom.text('▶')])\n      const content = dom.element('div', [pair.create('style', `${lineStyle};padding-left:${this.depth * 10}px`)], [triangleDown, triangleRight, dom.text(' ')].concat(_computeLineSpans(args)))\n      const nextContainer = dom.element('div', [pair.create('hidden', collapsed)])\n      const nextLine = dom.element('div', [], [content, nextContainer])\n      dom.append(this.ccontainer, [nextLine])\n      this.ccontainer = nextContainer\n      this.depth++\n      // when header is clicked, collapse/uncollapse container\n      dom.addEventListener(content, 'click', event => {\n        nextContainer.toggleAttribute('hidden')\n        triangleDown.toggleAttribute('hidden')\n        triangleRight.toggleAttribute('hidden')\n      })\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  groupCollapsed (args) {\n    this.group(args, true)\n  }\n\n  groupEnd () {\n    eventloop.enqueue(() => {\n      if (this.depth > 0) {\n        this.depth--\n        // @ts-ignore\n        this.ccontainer = this.ccontainer.parentElement.parentElement\n      }\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  print (args) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [dom.element('div', [pair.create('style', `${lineStyle};padding-left:${this.depth * 10}px`)], _computeLineSpans(args))])\n    })\n  }\n\n  /**\n   * @param {Error} err\n   */\n  printError (err) {\n    this.print([RED, BOLD, err.toString()])\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} height\n   */\n  printImg (url, height) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [dom.element('img', [pair.create('src', url), pair.create('height', `${math.round(height * 1.5)}px`)])])\n    })\n  }\n\n  /**\n   * @param {Node} node\n   */\n  printDom (node) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [node])\n    })\n  }\n\n  destroy () {\n    eventloop.enqueue(() => {\n      vconsoles.delete(this)\n    })\n  }\n}\n\n/* istanbul ignore next */\n/**\n * @param {Element} dom\n */\nexport const createVConsole = dom => new VConsole(dom)\n\nconst loggingColors = [GREEN, PURPLE, ORANGE, BLUE]\nlet nextColor = 0\nlet lastLoggingTime = time.getUnixTime()\n\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = moduleName => {\n  const color = loggingColors[nextColor]\n  const debugRegexVar = env.getVariable('log')\n  const doLogging = debugRegexVar !== null && (debugRegexVar === '*' || debugRegexVar === 'true' || new RegExp(debugRegexVar, 'gi').test(moduleName))\n  nextColor = (nextColor + 1) % loggingColors.length\n  moduleName += ': '\n\n  return !doLogging ? func.nop : (...args) => {\n    const timeNow = time.getUnixTime()\n    const timeDiff = timeNow - lastLoggingTime\n    lastLoggingTime = timeNow\n    print(color, moduleName, UNCOLOR, ...args.map(arg => (typeof arg === 'string' || typeof arg === 'symbol') ? arg : JSON.stringify(arg)), color, ' +' + timeDiff + 'ms')\n  }\n}\n"]},"metadata":{},"sourceType":"module"}