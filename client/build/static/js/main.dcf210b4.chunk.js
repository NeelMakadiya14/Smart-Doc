(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{170:function(e,t,n){},214:function(e,t){},237:function(e,t){},239:function(e,t){},249:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var c,r,o=n(15),a=n(0),i=n.n(a),s=n(40),l=n.n(s),u=(n(170),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,287)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))}),d=n(281),j=n(146),m=n(282),b=n(145),h=n.n(b),O=n(159),p=n(18),g=n(13),f=n(75),x=n(274),v=n(283),y=n(275),S=n(256),D=n(273),I=n(58),_=n.n(I),E=n(5),w=function(e){var t;var n=(new j.a).get("userCookie"),c=Object(a.useState)([]),r=Object(o.a)(c,2),i=r[0],s=r[1];Object(a.useEffect)((function(){_.a.get("".concat("https://thawing-dawn-49846.herokuapp.com/","user_doc/byUser?GID=").concat(n.GID)).then((function(e){console.log(e.data),s(e.data)}))}),[]),console.log("Doc List : ",i);var l=Object(D.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}))();return Object(E.jsxs)(x.a,(t={container:!0},Object(g.a)(t,"container",!0),Object(g.a)(t,"spacing",1),Object(g.a)(t,"fullWidth",!0),Object(g.a)(t,"style",{backgroundColor:"Azure",height:"100vh",padding:"2%"}),Object(g.a)(t,"children",[Object(E.jsx)(x.a,{item:!0,xs:12,style:{minWidth:"100%",display:"flex",justifyContent:"center",alignItems:"start"},children:Object(E.jsxs)(v.a,{style:{textAlign:"center"},children:[Object(E.jsxs)("h1",{style:{fontFamily:"Julius Sans One",fontSize:"50px",color:"black"},children:["Prodigy",Object(E.jsx)("p",{style:{fontFamily:"Julius Sans One",fontSize:"13px",color:"black"},children:Object(E.jsx)("strong",{children:"A place to collaborate"})})]}),Object(E.jsx)(y.a,{size:"large",className:"room-button",variant:"contained",color:"primary",onClick:function(){var t=Object(f.v1)();e.history.push("/room/".concat(t))},children:"Create New Doc"})]})}),i.map((function(t,n){return Object(E.jsx)(x.a,{item:!0,xs:3,children:Object(E.jsx)(y.a,{onClick:function(){return function(t){e.history.push("/room/".concat(t.doc_id))}(t)},children:Object(E.jsx)(S.a,{className:l.paper,children:Object(E.jsxs)("h1",{children:[t.doc_name,Object(E.jsx)("p",{style:{fontFamily:"Julius Sans One",fontSize:"13px",color:"black"},children:Object(E.jsx)("strong",{children:t.doc_id})})]})})},n)},n)}))]),t))},k=n(151),T=n(21),C=n(94),N=n(81),R=n.n(N),A=n(95),W=n.n(A),H=n(96),P=n(276),F=n(277),G=n(278);n(141).config();var L=H.a.div(c||(c=Object(C.a)(["\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n"]))),K=H.a.video(r||(r=Object(C.a)(["\n    height: 40%;\n    width: 50%;\n"]))),U=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){e.peer.peer.on("stream",(function(e){t.current.srcObject=e}))})),Object(E.jsxs)("div",{children:[Object(E.jsx)(K,{playsInline:!0,autoPlay:!0,ref:t,style:{width:"100%"}}),Object(E.jsx)(P.a,{children:e.peer.name})]})},V={height:window.innerHeight/2,width:window.innerWidth/2},B=function(e){var t=(new j.a).get("userCookie"),n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),l=Object(o.a)(s,2),u=l[0],d=l[1],m=Object(a.useRef)(),b=Object(a.useRef)(),h=Object(a.useRef)([]),O={room:e.room,name:t.name,GID:t.GID};console.log("On Top : ",u),Object(a.useEffect)((function(){window.onbeforeunload=function(){m.current&&m.current.close(),d([])}}));var p=function(){m.current=R.a.connect("/"),navigator.mediaDevices.getUserMedia({video:V,audio:!0}).then((function(e){b.current.srcObject=e,m.current.emit("join room",O),m.current.on("all users",(function(n){var c=[];n.forEach((function(n){var r=function(e,n,c){var r=new W.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{username:"qHtLVEHF6H9ZmteYAHm3-qOkRrPjNYQa1Pa1IxlDpVP_KQHIVuYk-NnNtveMDgijAAAAAGBOEKJOZWVsTWFrYWRpeWE=",credential:"d88d47d0-84c9-11eb-a788-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]},stream:c});return r.on("signal",(function(c){m.current.emit("sending signal",{userToSignal:e,callerID:n,signal:c,name:t.name,GID:t.GID})})),r}(n.socketID,m.current.id,e);h.current.push({peerID:n.socketID,peer:r,name:n.name,GID:n.GID}),c.push(r)})),d(c)})),m.current.on("user joined",(function(t){var n=function(e,t,n){var c=new W.a({initiator:!1,trickle:!1,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{username:"qHtLVEHF6H9ZmteYAHm3-qOkRrPjNYQa1Pa1IxlDpVP_KQHIVuYk-NnNtveMDgijAAAAAGBOEKJOZWVsTWFrYWRpeWE=",credential:"d88d47d0-84c9-11eb-a788-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]},stream:n});return c.on("signal",(function(e){m.current.emit("returning signal",{signal:e,callerID:t})})),c.signal(e),c}(t.signal,t.callerID,e);h.current.push({peerID:t.callerID,peer:n,name:t.name,GID:t.GID}),d((function(e){return[].concat(Object(T.a)(e),[n])}))})),m.current.on("receiving returned signal",(function(e){h.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)})),m.current.on("user left",(function(e){console.log("Called...");var t=h.current.find((function(t){return t.peerID===e}));t&&t.peer.destroy();var n=[];h.current.forEach((function(t){t.peerID!==e&&n.push(t.peer)}));var c=h.current.filter((function(t){return t.peerID!==e}));h.current=c,d(n)}))}))},g=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).USER_NAME||"nmakadiya1@gmail.com",f=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PASSWORD||"12345678";console.log("Changed : ",g,f);return Object(E.jsx)(L,{style:{height:"90vh"},children:Object(E.jsxs)(F.a,{children:[Object(E.jsx)(G.a,{children:Object(E.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){r?window.location.reload():(p(),i(!0))},children:r?"Leave Stream":"Join Stream"})}),r?Object(E.jsxs)(F.a,{children:[Object(E.jsx)(G.a,{className:"video-list",children:Object(E.jsxs)("div",{children:[Object(E.jsx)(K,{muted:!0,playsInline:!0,autoPlay:!0,ref:b,style:{width:"100%"}}),console.log("Log : ",u,h.current),Object(E.jsx)(P.a,{children:"You"})]})}),console.log("PeerRef : ",h.current),h.current.map((function(e,t){return Object(E.jsx)(G.a,{className:"video-list",children:Object(E.jsx)(U,{peer:e},e.peerID)},e.peerID)}))]}):null]})})},J=n(280),Y=n(20),z=n(160),q=n(158),M=n(97),Q=n.n(M),Z=n(155),X=n.n(Z),$=(n(249),n(285)),ee=n(279),te=n(156),ne=n.n(te),ce=n(157),re=n.n(ce);var oe=function(e){var t=(new j.a).get("userCookie"),n=t.name,c=Object(a.useRef)(),r=Object(a.useState)(""),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)([]),d=Object(o.a)(u,2),m=d[0],b=d[1];console.log("Test");var h="https://thawing-dawn-49846.herokuapp.com/";console.log("production",h);var O={room:e.roomID,name:t.name,GID:t.GID,imgURI:"123"};return window.onbeforeunload=function(){c.current&&c.current.close()},Object(a.useEffect)((function(){_.a.get("".concat(h,"chat?room=").concat(e.roomID)).then((function(e){console.log(e.data),b(e.data)})),c.current=R.a.connect(h),c.current.emit("join chat room",O),console.log("Inside UseEffect : ",m),c.current.on("recevied msg",(function(e){console.log("yes received.."),b((function(t){return[].concat(Object(T.a)(t),[e])})),console.log(m)}))}),[]),Object(E.jsxs)("div",{className:"chat",children:[Object(E.jsxs)("div",{className:"chat__header",children:[Object(E.jsx)($.a,{src:""}),Object(E.jsx)("p",{children:"Room Name"})]}),Object(E.jsx)("div",{className:"chat__body",children:m.map((function(e,n){return Object(E.jsxs)("p",{className:"chat__message ".concat(t.name===e.userName&&"chat__receiver"),children:[Object(E.jsx)("span",{className:"chat__name",children:e.userName}),e.msg,Object(E.jsx)("span",{className:"chat__timestamp",children:e.time})]},n)}))}),Object(E.jsxs)("div",{className:"chat__footer",children:[Object(E.jsx)(ee.a,{children:Object(E.jsx)(ne.a,{})}),Object(E.jsxs)("form",{children:[Object(E.jsx)("input",{value:s,onChange:function(e){return l(e.target.value)},placeholder:"Type a message",type:"text"}),Object(E.jsx)("button",{onClick:function(t){t.preventDefault();var r={userName:n,photoUri:"123",msg:s,time:new Date,room:e.roomID};c.current.emit("send msg",r),l("")},type:"submit",children:"Send message"})]}),Object(E.jsx)(ee.a,{children:Object(E.jsx)(re.a,{})})]})]})};function ae(e){var t=e.match.params.roomID;Q.a.register("modules/cursors",X.a);var n=new Y.Doc,c=(new j.a).get("userCookie"),r=c.name,o={userName:c.name,photoUri:"123",GID:c.GID,doc_name:"xyz",doc_id:t};Object(a.useEffect)((function(){console.log(o),_.a.post("".concat("https://thawing-dawn-49846.herokuapp.com/","user_doc"),o).then((function(e){console.log(e)}))}),[]);var i=new z.a("wss://shielded-sierra-61478.herokuapp.com","".concat(t),n),s=n.getText("".concat(t));return Object(a.useEffect)((function(){var e=document.getElementById("editor"),t=new Q.a(e,{modules:{cursors:!0,toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],history:{userOnly:!0}},placeholder:"Start collaborating...",theme:"snow"}),c=new q.a(s,t,i.awareness);r||(Object(k.a)("username"),r="Anonymous"),i.awareness.setLocalStateField("user",{name:"".concat(r),color:"blue"}),window.example={provider:i,ydoc:n,type:s,binding:c,Y:Y}})),Object(E.jsx)("div",{children:Object(E.jsxs)(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1,children:[Object(E.jsx)(x.a,{item:!0,xs:2,style:{maxHeight:"100vh"},children:Object(E.jsx)(B,{room:t,style:{height:"inherit"}})}),Object(E.jsx)(x.a,{item:!0,xs:7,children:Object(E.jsx)(J.a,{children:Object(E.jsx)("div",{id:"editor"})})}),Object(E.jsx)(x.a,{item:!0,xs:3,style:{height:"100%"},alignItems:"end",children:Object(E.jsx)(oe,{roomID:t})})]})})}var ie=function(){return Object(E.jsx)(O.a,{children:Object(E.jsxs)(p.c,{children:[Object(E.jsx)(p.a,{path:"/",exact:!0,component:w}),Object(E.jsx)(p.a,{path:"/room/:roomID",component:ae})]})})};n(141).config();var se=function(){var e=Object(d.a)([""]),t=Object(o.a)(e,2),n=(t[0],t[1]),c=(new j.a).get("userCookie"),r=Object(a.useState)(!!c),s=Object(o.a)(r,2),l=s[0],u=s[1];console.log("From ENV:",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_ID);var b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CLIENT_ID||"320579900532-2v5d813s6a6apgda92l4k266kdjr2aht.apps.googleusercontent.com";return Object(E.jsx)(m.a,{children:Object(E.jsx)(i.a.StrictMode,{children:l?Object(E.jsx)(ie,{}):Object(E.jsxs)(x.a,{container:!0,direction:"column",justify:"center",alignItems:"center",fullWidth:!0,style:{backgroundColor:"LightBlue",height:"100vh"},children:[Object(E.jsx)(x.a,{item:!0,xs:4,style:{minHeight:"33vh",minWidth:"100%"}}),Object(E.jsx)(x.a,{item:!0,xs:4,style:{minHeight:"33vh",minWidth:"100%",display:"flex",justifyContent:"center",alignItems:"start"},children:Object(E.jsxs)(v.a,{style:{textAlign:"center"},children:[Object(E.jsxs)("h1",{style:{fontFamily:"Julius Sans One",fontSize:"50px",color:"black"},children:["Prodigy",Object(E.jsx)("p",{style:{fontFamily:"Julius Sans One",fontSize:"13px",color:"black"},children:Object(E.jsx)("strong",{children:"A place to collaborate"})})]}),Object(E.jsx)(h.a,{clientId:b,onSuccess:function(e){console.log("Success"),console.log(e);var t={accessToken:e.accessToken,tokenId:e.tokenId,email:e.profileObj.email,name:e.profileObj.name,GID:e.googleId};console.log(t),n("userCookie",t),u(!0)},onFailure:function(e){console.log("Failed ",e)},children:Object(E.jsx)("strong",{children:"Sign in with Google"})})]})}),Object(E.jsx)(x.a,{item:!0,xs:4,style:{minHeight:"33vh",minWidth:"100%"}})]})})})};l.a.render(Object(E.jsx)(se,{}),document.getElementById("root")),u()}},[[254,1,2]]]);
//# sourceMappingURL=main.dcf210b4.chunk.js.map